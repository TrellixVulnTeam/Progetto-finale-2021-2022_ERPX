{"ast":null,"code":"import _asyncToGenerator from \"/Users/test/Desktop/progGiovedi4novembreJonathanVelasquez/ProgettoEpicodeJonathanVelaquez/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nlet LoginComponent = class LoginComponent {\n  constructor(utenteService, RouteGuard, router) {\n    this.utenteService = utenteService;\n    this.RouteGuard = RouteGuard;\n    this.router = router;\n    this.logUser = false;\n    this.messaggio = '';\n  }\n\n  ngOnInit() {}\n\n  logIn() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      console.log(_this.username);\n      console.log(_this.password);\n\n      try {\n        yield _this.takeBearerAuth();\n      } catch (err) {\n        console.log(err);\n        _this.messaggio = 'Username o Password errati!';\n      }\n\n      console.log(_this.utenteService.getToken());\n    })();\n  }\n\n  takeBearerAuth() {\n    return new Promise((resolve, reject) => {\n      var _a;\n\n      (_a = this.utenteService.logIn(this.username, this.password)) === null || _a === void 0 ? void 0 : _a.subscribe(res => {\n        console.log('NO');\n        this.utenteService.setBearer(res.accessToken);\n\n        if (this.utenteService.getToken()) {\n          console.log(this.utenteService.getToken());\n          this.RouteGuard.setLogin();\n          this.router.navigate(['/clienti']);\n        }\n\n        resolve();\n      }, err => {\n        reject(err);\n      });\n    });\n  }\n\n};\nLoginComponent = __decorate([Component({\n  selector: 'app-login',\n  templateUrl: './login.component.html',\n  styleUrls: ['./login.component.css']\n})], LoginComponent);\nexport { LoginComponent };","map":{"version":3,"sources":["/Users/test/Desktop/progGiovedi4novembreJonathanVelasquez/ProgettoEpicodeJonathanVelaquez/src/app/login/login.component.ts"],"names":["__decorate","Component","LoginComponent","constructor","utenteService","RouteGuard","router","logUser","messaggio","ngOnInit","logIn","console","log","username","password","takeBearerAuth","err","getToken","Promise","resolve","reject","_a","subscribe","res","setBearer","accessToken","setLogin","navigate","selector","templateUrl","styleUrls"],"mappings":";AAAA,SAASA,UAAT,QAA2B,OAA3B;AACA,SAASC,SAAT,QAA0B,eAA1B;AACA,IAAIC,cAAc,GAAG,MAAMA,cAAN,CAAqB;AACtCC,EAAAA,WAAW,CAACC,aAAD,EAAgBC,UAAhB,EAA4BC,MAA5B,EAAoC;AAC3C,SAAKF,aAAL,GAAqBA,aAArB;AACA,SAAKC,UAAL,GAAkBA,UAAlB;AACA,SAAKC,MAAL,GAAcA,MAAd;AACA,SAAKC,OAAL,GAAe,KAAf;AACA,SAAKC,SAAL,GAAiB,EAAjB;AACH;;AACDC,EAAAA,QAAQ,GAAG,CACV;;AACKC,EAAAA,KAAK,GAAG;AAAA;;AAAA;AACVC,MAAAA,OAAO,CAACC,GAAR,CAAY,KAAI,CAACC,QAAjB;AACAF,MAAAA,OAAO,CAACC,GAAR,CAAY,KAAI,CAACE,QAAjB;;AACA,UAAI;AACA,cAAM,KAAI,CAACC,cAAL,EAAN;AACH,OAFD,CAGA,OAAOC,GAAP,EAAY;AACRL,QAAAA,OAAO,CAACC,GAAR,CAAYI,GAAZ;AACA,QAAA,KAAI,CAACR,SAAL,GAAiB,6BAAjB;AACH;;AACDG,MAAAA,OAAO,CAACC,GAAR,CAAY,KAAI,CAACR,aAAL,CAAmBa,QAAnB,EAAZ;AAVU;AAWb;;AACDF,EAAAA,cAAc,GAAG;AACb,WAAO,IAAIG,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;AACpC,UAAIC,EAAJ;;AACA,OAACA,EAAE,GAAG,KAAKjB,aAAL,CAAmBM,KAAnB,CAAyB,KAAKG,QAA9B,EAAwC,KAAKC,QAA7C,CAAN,MAAkE,IAAlE,IAA0EO,EAAE,KAAK,KAAK,CAAtF,GAA0F,KAAK,CAA/F,GAAmGA,EAAE,CAACC,SAAH,CAAaC,GAAG,IAAI;AACnHZ,QAAAA,OAAO,CAACC,GAAR,CAAY,IAAZ;AACA,aAAKR,aAAL,CAAmBoB,SAAnB,CAA6BD,GAAG,CAACE,WAAjC;;AACA,YAAI,KAAKrB,aAAL,CAAmBa,QAAnB,EAAJ,EAAmC;AAC/BN,UAAAA,OAAO,CAACC,GAAR,CAAY,KAAKR,aAAL,CAAmBa,QAAnB,EAAZ;AACA,eAAKZ,UAAL,CAAgBqB,QAAhB;AACA,eAAKpB,MAAL,CAAYqB,QAAZ,CAAqB,CAAC,UAAD,CAArB;AACH;;AACDR,QAAAA,OAAO;AACV,OATkG,EAShGH,GAAG,IAAI;AACNI,QAAAA,MAAM,CAACJ,GAAD,CAAN;AACH,OAXkG,CAAnG;AAYH,KAdM,CAAP;AAeH;;AAtCqC,CAA1C;AAwCAd,cAAc,GAAGF,UAAU,CAAC,CACxBC,SAAS,CAAC;AACN2B,EAAAA,QAAQ,EAAE,WADJ;AAENC,EAAAA,WAAW,EAAE,wBAFP;AAGNC,EAAAA,SAAS,EAAE,CAAC,uBAAD;AAHL,CAAD,CADe,CAAD,EAMxB5B,cANwB,CAA3B;AAOA,SAASA,cAAT","sourcesContent":["import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nlet LoginComponent = class LoginComponent {\n    constructor(utenteService, RouteGuard, router) {\n        this.utenteService = utenteService;\n        this.RouteGuard = RouteGuard;\n        this.router = router;\n        this.logUser = false;\n        this.messaggio = '';\n    }\n    ngOnInit() {\n    }\n    async logIn() {\n        console.log(this.username);\n        console.log(this.password);\n        try {\n            await this.takeBearerAuth();\n        }\n        catch (err) {\n            console.log(err);\n            this.messaggio = 'Username o Password errati!';\n        }\n        console.log(this.utenteService.getToken());\n    }\n    takeBearerAuth() {\n        return new Promise((resolve, reject) => {\n            var _a;\n            (_a = this.utenteService.logIn(this.username, this.password)) === null || _a === void 0 ? void 0 : _a.subscribe(res => {\n                console.log('NO');\n                this.utenteService.setBearer(res.accessToken);\n                if (this.utenteService.getToken()) {\n                    console.log(this.utenteService.getToken());\n                    this.RouteGuard.setLogin();\n                    this.router.navigate(['/clienti']);\n                }\n                resolve();\n            }, err => {\n                reject(err);\n            });\n        });\n    }\n};\nLoginComponent = __decorate([\n    Component({\n        selector: 'app-login',\n        templateUrl: './login.component.html',\n        styleUrls: ['./login.component.css']\n    })\n], LoginComponent);\nexport { LoginComponent };\n"]},"metadata":{},"sourceType":"module"}